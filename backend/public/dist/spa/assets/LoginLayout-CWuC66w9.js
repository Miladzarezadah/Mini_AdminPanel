import{i as je,e as oe,t as Ce,g as qe,r as c,c as g,o as _e,a as Se,w as Ke,R as We,h as p,Q as M,b as ze,d as He,s as Oe,f as Ge,j as ke,k as Z,l as Xe,m as Ye,n as Je,p as Ze,q as D,u as F,v as U,x as et,y as T,z,A as ge,B as he,N as ee}from"./index-Dg-BHVTn.js";import{Q as tt,a as H}from"./QPage-C86gm6H-.js";import{Q as at,a as lt,b as nt}from"./QLayout-hb1FixhA.js";import{u as se,a as ye,r as ot,Q as we}from"./QForm-BOWtGKM7.js";import{api as Te}from"./axios-im87-qqI.js";import{u as st}from"./use-quasar-DNTfzSVM.js";import"./scroll-CnkGX98e.js";let rt=0;const it=["click","keydown"],ut={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${rt++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function ct(e,q,_,h){const r=je(Ce,oe);if(r===oe)return console.error("QTab/QRouteTab component needs to be child of QTabs"),oe;const{proxy:S}=qe(),P=c(null),k=c(null),m=c(null),Q=g(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),V=g(()=>r.currentModel.value===e.name),E=g(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(V.value===!0?" q-tab--active"+(r.tabProps.value.activeClass?" "+r.tabProps.value.activeClass:"")+(r.tabProps.value.activeColor?` text-${r.tabProps.value.activeColor}`:"")+(r.tabProps.value.activeBgColor?` bg-${r.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&r.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||r.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")),x=g(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(r.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),y=g(()=>e.disable===!0||r.hasFocus.value===!0||V.value===!1&&r.hasActiveTab.value===!0?-1:e.tabindex||0);function C(i,w){if(w!==!0&&P.value!==null&&P.value.focus(),e.disable!==!0){r.updateModel({name:e.name}),_("click",i);return}}function d(i){He(i,[13,32])?C(i,!0):Oe(i)!==!0&&i.keyCode>=35&&i.keyCode<=40&&i.altKey!==!0&&i.metaKey!==!0&&r.onKbdNavigate(i.keyCode,S.$el)===!0&&Ge(i),_("keydown",i)}function n(){const i=r.tabProps.value.narrowIndicator,w=[],I=p("div",{ref:m,class:["q-tab__indicator",r.tabProps.value.indicatorClass]});e.icon!==void 0&&w.push(p(M,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&w.push(p("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&w.push(e.alertIcon!==void 0?p(M,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):p("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),i===!0&&w.push(I);const L=[p("div",{class:"q-focus-helper",tabindex:-1,ref:P}),p("div",{class:x.value},ze(q.default,w))];return i===!1&&L.push(I),L}const s={name:g(()=>e.name),rootRef:k,tabIndicatorRef:m,routeData:h};_e(()=>{r.unregisterTab(s)}),Se(()=>{r.registerTab(s)});function N(i,w){const I={ref:k,class:E.value,tabindex:y.value,role:"tab","aria-selected":V.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:C,onKeydown:d,...w};return Ke(p(i,I,n()),[[We,Q.value]])}return{renderTab:N,$tabs:r}}const pe=ke({name:"QTab",props:ut,emits:it,setup(e,{slots:q,emit:_}){const{renderTab:h}=ct(e,q,_);return()=>h("div")}});function dt(e,q,_){const h=_===!0?["left","right"]:["top","bottom"];return`absolute-${q===!0?h[0]:h[1]}${e?` text-${e}`:""}`}const vt=["left","center","right","justify"],ft=ke({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>vt.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:q,emit:_}){const{proxy:h}=qe(),{$q:r}=h,{registerTick:S}=se(),{registerTick:P}=se(),{registerTick:k}=se(),{registerTimeout:m,removeTimeout:Q}=ye(),{registerTimeout:V,removeTimeout:E}=ye(),x=c(null),y=c(null),C=c(e.modelValue),d=c(!1),n=c(!0),s=c(!1),N=c(!1),i=[],w=c(0),I=c(!1);let L=null,j=null,B;const xe=g(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:dt(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),Le=g(()=>{const t=w.value,a=C.value;for(let l=0;l<t;l++)if(i[l].name.value===a)return!0;return!1}),Pe=g(()=>`q-tabs__content--align-${d.value===!0?"left":N.value===!0?"justify":e.align}`),Ie=g(()=>`q-tabs row no-wrap items-center q-tabs--${d.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),Re=g(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Pe.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),G=g(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),X=g(()=>e.vertical!==!0&&r.lang.rtl===!0),te=g(()=>ot===!1&&X.value===!0);Z(X,W),Z(()=>e.modelValue,t=>{ae({name:t,setCurrent:!0,skipEmit:!0})}),Z(()=>e.outsideArrows,Y);function ae({name:t,setCurrent:a,skipEmit:l}){C.value!==t&&(l!==!0&&e["onUpdate:modelValue"]!==void 0&&_("update:modelValue",t),(a===!0||e["onUpdate:modelValue"]===void 0)&&(Ve(C.value,t),C.value=t))}function Y(){S(()=>{x.value&&re({width:x.value.offsetWidth,height:x.value.offsetHeight})})}function re(t){if(G.value===void 0||y.value===null)return;const a=t[G.value.container],l=Math.min(y.value[G.value.scroll],Array.prototype.reduce.call(y.value.children,(f,u)=>f+(u[G.value.content]||0),0)),v=a>0&&l>a;d.value=v,v===!0&&P(W),N.value=a<parseInt(e.breakpoint,10)}function Ve(t,a){const l=t!=null&&t!==""?i.find(f=>f.name.value===t):null,v=a!=null&&a!==""?i.find(f=>f.name.value===a):null;if(J===!0)J=!1;else if(l&&v){const f=l.tabIndicatorRef.value,u=v.tabIndicatorRef.value;L!==null&&(clearTimeout(L),L=null),f.style.transition="none",f.style.transform="none",u.style.transition="none",u.style.transform="none";const o=f.getBoundingClientRect(),b=u.getBoundingClientRect();u.style.transform=e.vertical===!0?`translate3d(0,${o.top-b.top}px,0) scale3d(1,${b.height?o.height/b.height:1},1)`:`translate3d(${o.left-b.left}px,0,0) scale3d(${b.width?o.width/b.width:1},1,1)`,k(()=>{L=setTimeout(()=>{L=null,u.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",u.style.transform="none"},70)})}v&&d.value===!0&&K(v.rootRef.value)}function K(t){const{left:a,width:l,top:v,height:f}=y.value.getBoundingClientRect(),u=t.getBoundingClientRect();let o=e.vertical===!0?u.top-v:u.left-a;if(o<0){y.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(o),W();return}o+=e.vertical===!0?u.height-f:u.width-l,o>0&&(y.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(o),W())}function W(){const t=y.value;if(t===null)return;const a=t.getBoundingClientRect(),l=e.vertical===!0?t.scrollTop:Math.abs(t.scrollLeft);X.value===!0?(n.value=Math.ceil(l+a.width)<t.scrollWidth-1,s.value=l>0):(n.value=l>0,s.value=e.vertical===!0?Math.ceil(l+a.height)<t.scrollHeight:Math.ceil(l+a.width)<t.scrollWidth)}function ie(t){j!==null&&clearInterval(j),j=setInterval(()=>{Ae(t)===!0&&$()},5)}function ue(){ie(te.value===!0?Number.MAX_SAFE_INTEGER:0)}function ce(){ie(te.value===!0?0:Number.MAX_SAFE_INTEGER)}function $(){j!==null&&(clearInterval(j),j=null)}function Be(t,a){const l=Array.prototype.filter.call(y.value.children,b=>b===a||b.matches&&b.matches(".q-tab.q-focusable")===!0),v=l.length;if(v===0)return;if(t===36)return K(l[0]),l[0].focus(),!0;if(t===35)return K(l[v-1]),l[v-1].focus(),!0;const f=t===(e.vertical===!0?38:37),u=t===(e.vertical===!0?40:39),o=f===!0?-1:u===!0?1:void 0;if(o!==void 0){const b=X.value===!0?-1:1,R=l.indexOf(a)+o*b;return R>=0&&R<v&&(K(l[R]),l[R].focus({preventScroll:!0})),!0}}const $e=g(()=>te.value===!0?{get:t=>Math.abs(t.scrollLeft),set:(t,a)=>{t.scrollLeft=-a}}:e.vertical===!0?{get:t=>t.scrollTop,set:(t,a)=>{t.scrollTop=a}}:{get:t=>t.scrollLeft,set:(t,a)=>{t.scrollLeft=a}});function Ae(t){const a=y.value,{get:l,set:v}=$e.value;let f=!1,u=l(a);const o=t<u?-1:1;return u+=o*5,u<0?(f=!0,u=0):(o===-1&&u<=t||o===1&&u>=t)&&(f=!0,u=t),v(a,u),W(),f}function de(t,a){for(const l in t)if(t[l]!==a[l])return!1;return!0}function Ue(){let t=null,a={matchedLen:0,queryDiff:9999,hrefLen:0};const l=i.filter(o=>o.routeData!==void 0&&o.routeData.hasRouterLink.value===!0),{hash:v,query:f}=h.$route,u=Object.keys(f).length;for(const o of l){const b=o.routeData.exact.value===!0;if(o.routeData[b===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:R,query:le,matched:Ee,href:Ne}=o.routeData.resolvedLink.value,ne=Object.keys(le).length;if(b===!0){if(R!==v||ne!==u||de(f,le)===!1)continue;t=o.name.value;break}if(R!==""&&R!==v||ne!==0&&de(le,f)===!1)continue;const A={matchedLen:Ee.length,queryDiff:u-ne,hrefLen:Ne.length-R.length};if(A.matchedLen>a.matchedLen){t=o.name.value,a=A;continue}else if(A.matchedLen!==a.matchedLen)continue;if(A.queryDiff<a.queryDiff)t=o.name.value,a=A;else if(A.queryDiff!==a.queryDiff)continue;A.hrefLen>a.hrefLen&&(t=o.name.value,a=A)}if(t===null&&i.some(o=>o.routeData===void 0&&o.name.value===C.value)===!0){J=!1;return}ae({name:t,setCurrent:!0})}function Me(t){if(Q(),I.value!==!0&&x.value!==null&&t.target&&typeof t.target.closest=="function"){const a=t.target.closest(".q-tab");a&&x.value.contains(a)===!0&&(I.value=!0,d.value===!0&&K(a))}}function Qe(){m(()=>{I.value=!1},30)}function O(){fe.avoidRouteWatcher===!1?V(Ue):E()}function ve(){if(B===void 0){const t=Z(()=>h.$route.fullPath,O);B=()=>{t(),B=void 0}}}function De(t){i.push(t),w.value++,Y(),t.routeData===void 0||h.$route===void 0?V(()=>{if(d.value===!0){const a=C.value,l=a!=null&&a!==""?i.find(v=>v.name.value===a):null;l&&K(l.rootRef.value)}}):(ve(),t.routeData.hasRouterLink.value===!0&&O())}function Fe(t){i.splice(i.indexOf(t),1),w.value--,Y(),B!==void 0&&t.routeData!==void 0&&(i.every(a=>a.routeData===void 0)===!0&&B(),O())}const fe={currentModel:C,tabProps:xe,hasFocus:I,hasActiveTab:Le,registerTab:De,unregisterTab:Fe,verifyRouteModel:O,updateModel:ae,onKbdNavigate:Be,avoidRouteWatcher:!1};Ze(Ce,fe);function me(){L!==null&&clearTimeout(L),$(),B!==void 0&&B()}let be,J;return _e(me),Xe(()=>{be=B!==void 0,me()}),Ye(()=>{be===!0&&(ve(),J=!0,O()),Y()}),()=>p("div",{ref:x,class:Ie.value,role:"tablist",onFocusin:Me,onFocusout:Qe},[p(at,{onResize:re}),p("div",{ref:y,class:Re.value,onScroll:W},Je(q.default)),p(M,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(n.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||r.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ue,onTouchstartPassive:ue,onMouseupPassive:$,onMouseleavePassive:$,onTouchendPassive:$}),p(M,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(s.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||r.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:ce,onTouchstartPassive:ce,onMouseupPassive:$,onMouseleavePassive:$,onTouchendPassive:$})])}}),mt={class:"Forms bg-white"},bt={class:"q-gutter-md"},gt={class:"q-mt-lg"},ht={class:"q-gutter-md q-mb-md"},yt={class:"q-mt-sm"},kt={__name:"LoginLayout",setup(e){const q=et(),_=st(),h=c(null),r=c("Login"),S=c({username:c(""),password:c("")}),P=c(!1),k=c("password"),m=c({name:c(""),username:c(""),email:c(""),password:c("")}),Q=c(!1),V=c("password"),E=c([]),x=async()=>{try{const d=Te.get("/users");E.value=(await d).data}catch(d){console.log(d)}};function y(){const d=E.value.find(n=>n.username==S.value.username&&n.password==S.value.password);if(d){localStorage.setItem("id",d.id),h.value=d;const n=localStorage.getItem(`theme_${h.value.id}`);_.dark.set(n==="true"),ee.create({type:"positive",message:"You have successfully logged in"}),q.push("/")}else ee.create({type:"negative",message:"Please enter the correct username and password"})}async function C(){try{const d=await Te.post("/signup",{name:m.value.name,username:m.value.username,password:m.value.password,email:m.value.email});d.data.success?(localStorage.setItem("id",d.data.token),ee.create({type:"positive",message:"The account was created successfully"}),q.push("/")):alert(d.data.message)}catch(d){console.error(d),ee.create({type:"negative",message:"This username has already been created"})}}return Se(()=>{x()}),(d,n)=>(F(),D(lt,{view:"lHh Lpr lFf"},{default:U(()=>[T(nt,null,{default:U(()=>[T(tt,{padding:"",class:"flex flex-center"},{default:U(()=>[z("div",mt,[T(ft,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=s=>r.value=s),class:"text-amber q-mb-lg",dense:"","inline-label":""},{default:U(()=>[T(pe,{name:"Login",icon:"login",label:"Login"}),T(pe,{name:"SignUp",icon:"person_add",label:"SignUp"})]),_:1},8,["modelValue"]),r.value=="Login"?(F(),D(we,{key:0,onSubmit:y,class:"LoginForm q-mt-xl"},{default:U(()=>[z("div",bt,[T(H,{modelValue:S.value.username,"onUpdate:modelValue":n[1]||(n[1]=s=>S.value.username=s),type:"text",label:"Username",standout:"bg-primary text-white"},null,8,["modelValue"]),T(H,{modelValue:S.value.password,"onUpdate:modelValue":n[4]||(n[4]=s=>S.value.password=s),type:k.value,label:"Password",standout:"bg-primary text-white",rules:[s=>s.length>=5||"Please use minimum 5 characters"]},{append:U(()=>[P.value==!1?(F(),D(M,{key:0,name:"visibility",class:"cursor-pointer",onClick:n[2]||(n[2]=s=>(k.value="text",P.value=!0))})):(F(),D(M,{key:1,name:"visibility_off",class:"cursor-pointer",onClick:n[3]||(n[3]=s=>(k.value="password",P.value=!1))}))]),_:1},8,["modelValue","type","rules"])]),z("div",gt,[T(he,{label:"Login",type:"submit",class:"full-width",color:"primary"})])]),_:1})):ge("",!0),r.value=="SignUp"?(F(),D(we,{key:1,onSubmit:C,class:"SignUpForm"},{default:U(()=>[z("div",null,[z("div",ht,[T(H,{modelValue:m.value.name,"onUpdate:modelValue":n[5]||(n[5]=s=>m.value.name=s),type:"text",label:"Name",standout:"bg-primary text-white"},null,8,["modelValue"]),T(H,{modelValue:m.value.username,"onUpdate:modelValue":n[6]||(n[6]=s=>m.value.username=s),type:"text",label:"Username",standout:"bg-primary text-white"},null,8,["modelValue"])]),T(H,{modelValue:m.value.email,"onUpdate:modelValue":n[7]||(n[7]=s=>m.value.email=s),type:"text",label:"Email",standout:"bg-primary text-white",rules:[(s,N)=>N.email(s)||"Please enter a valid email address"]},null,8,["modelValue","rules"]),T(H,{modelValue:m.value.password,"onUpdate:modelValue":n[10]||(n[10]=s=>m.value.password=s),type:k.value,label:"Password:",standout:"bg-primary text-white",rules:[s=>s.length>=5||"Please use minimum 5 characters"]},{append:U(()=>[Q.value==!1?(F(),D(M,{key:0,name:"visibility",class:"cursor-pointer",onClick:n[8]||(n[8]=s=>(k.value="text",Q.value=!0))})):(F(),D(M,{key:1,name:"visibility_off",class:"cursor-pointer",onClick:n[9]||(n[9]=s=>(V.value="password",Q.value=!1))}))]),_:1},8,["modelValue","type","rules"])]),z("div",yt,[T(he,{label:"Create User",type:"submit",class:"full-width",color:"primary"})])]),_:1})):ge("",!0)])]),_:1})]),_:1})]),_:1}))}};export{kt as default};
