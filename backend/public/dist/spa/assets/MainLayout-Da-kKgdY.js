import{j as B,c as d,h as k,n as S,g as U,i as O,e as x,C as R,r as C,k as b,o as j,D,a as A,q as h,u as i,v as g,x as E,N as M,E as P,F as G,y as _,z,G as H,A as Q,H as c,B as q,I as N}from"./index-CmeDau2E.js";import{Q as K,a as Y,b as J}from"./QLayout-CUQUBu8v.js";import{u as W}from"./use-quasar-CjJ26LuW.js";import{api as X}from"./axios-BYCvkEcn.js";import"./scroll-9zvr2fBN.js";const I=B({name:"QToolbarTitle",props:{shrink:Boolean},setup(t,{slots:r}){const s=d(()=>"q-toolbar__title ellipsis"+(t.shrink===!0?" col-shrink":""));return()=>k("div",{class:s.value},S(r.default))}}),Z=B({name:"QToolbar",props:{inset:Boolean},setup(t,{slots:r}){const s=d(()=>"q-toolbar row no-wrap items-center"+(t.inset===!0?" q-toolbar--inset":""));return()=>k("div",{class:s.value,role:"toolbar"},S(r.default))}}),ee=B({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:r,emit:s}){const{proxy:{$q:f}}=U(),a=O(R,x);if(a===x)return console.error("QHeader needs to be child of QLayout"),x;const v=C(parseInt(t.heightHint,10)),n=C(!0),o=d(()=>t.reveal===!0||a.view.value.indexOf("H")!==-1||f.platform.is.ios&&a.isContainer.value===!0),m=d(()=>{if(t.modelValue!==!0)return 0;if(o.value===!0)return n.value===!0?v.value:0;const e=v.value-a.scroll.value.position;return e>0?e:0}),p=d(()=>t.modelValue!==!0||o.value===!0&&n.value!==!0),w=d(()=>t.modelValue===!0&&p.value===!0&&t.reveal===!0),T=d(()=>"q-header q-layout__section--marginal "+(o.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(p.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),$=d(()=>{const e=a.rows.value.top,u={};return e[0]==="l"&&a.left.space===!0&&(u[f.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),e[2]==="r"&&a.right.space===!0&&(u[f.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),u});function l(e,u){a.update("header",e,u)}function y(e,u){e.value!==u&&(e.value=u)}function F({height:e}){y(v,e),l("size",e)}function L(e){w.value===!0&&y(n,!0),s("focusin",e)}b(()=>t.modelValue,e=>{l("space",e),y(n,!0),a.animate()}),b(m,e=>{l("offset",e)}),b(()=>t.reveal,e=>{e===!1&&y(n,t.modelValue)}),b(n,e=>{a.animate(),s("reveal",e)}),b(a.scroll,e=>{t.reveal===!0&&y(n,e.direction==="up"||e.position<=t.revealOffset||e.position-e.inflectionPoint<100)});const V={};return a.instances.header=V,t.modelValue===!0&&l("size",v.value),l("space",t.modelValue),l("offset",m.value),j(()=>{a.instances.header===V&&(a.instances.header=void 0,l("size",0),l("offset",0),l("space",!1))}),()=>{const e=D(r.default,[]);return t.elevated===!0&&e.push(k("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(k(K,{debounce:0,onResize:F})),k("header",{class:T.value,style:$.value,onFocusin:L},e)}}}),te={key:0},ae={key:1,class:"Aligning"},ue={__name:"MainLayout",setup(t){const r=E(),s=P(),f=W();async function a(){try{const o=(await X.get("/users")).data,m=localStorage.getItem("id");o.find(w=>w.id==m)||(localStorage.removeItem("id"),r.push("/login"),M.create({type:"warning",message:"Your token has expired"}))}catch(n){console.log(n)}}function v(){localStorage.removeItem("id"),f.dark.set(!1),r.push("/login")}return A(()=>{a()}),(n,o)=>{const m=G("router-view");return i(),h(Y,{view:"lHh Lpr lFf"},{default:g(()=>[_(ee,{elevated:""},{default:g(()=>[_(Z,{class:"row justify-between"},{default:g(()=>[z("div",null,[c(s).path=="/"?(i(),h(q,{key:0,flat:"",dense:"",icon:"settings",label:"setting",onClick:o[0]||(o[0]=p=>c(r).push("/settings"))})):(i(),h(q,{key:1,flat:"",dense:"",icon:"home",label:"Dashboard",onClick:o[1]||(o[1]=p=>c(r).push("/"))}))]),c(f).screen.xs?Q("",!0):(i(),H("div",te,[c(s).path=="/"?(i(),h(I,{key:0,align:"center"},{default:g(()=>o[2]||(o[2]=[N(" Dashboard ")])),_:1})):(i(),h(I,{key:1,align:"center"},{default:g(()=>o[3]||(o[3]=[N(" Settings ")])),_:1}))])),z("div",null,[c(s).path!=="/settings"?(i(),h(q,{key:0,flat:"",dense:"",icon:"logout",label:"logout",onClick:v})):Q("",!0),!c(f).screen.xs&&c(s).path=="/settings"?(i(),H("div",ae)):Q("",!0)])]),_:1})]),_:1}),_(J,null,{default:g(()=>[_(m)]),_:1})]),_:1})}}};export{ue as default};
